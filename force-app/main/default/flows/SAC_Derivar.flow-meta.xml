<?xml version="1.0" encoding="UTF-8"?>
<Flow xmlns="http://soap.sforce.com/2006/04/metadata">
    <actionCalls>
        <name>Email</name>
        <label>Email</label>
        <locationX>1486</locationX>
        <locationY>406</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <connector>
            <targetReference>getRecordTypePretension</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>richTextMensaje.mensajeEmail</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <elementReference>Para</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sendRichBody</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <elementReference>Asunto</elementReference>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>EnviarEmail</name>
        <label>EnviarEmail</label>
        <locationX>1612</locationX>
        <locationY>88</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <connector>
            <targetReference>getCasoYsusPretensiones</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>htmlValueTemplateConsulta</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <elementReference>Para_0</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sendRichBody</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <elementReference>subjectEmailTemplateConsulta</elementReference>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
    </actionCalls>
    <actionCalls>
        <name>enviarMailReclamante</name>
        <label>enviarMailReclamante</label>
        <locationX>1905</locationX>
        <locationY>1259</locationY>
        <actionName>emailSimple</actionName>
        <actionType>emailSimple</actionType>
        <connector>
            <targetReference>updateCasos</targetReference>
        </connector>
        <flowTransactionModel>CurrentTransaction</flowTransactionModel>
        <inputParameters>
            <name>emailBody</name>
            <value>
                <elementReference>htmlValueTemplateReclamante</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailAddresses</name>
            <value>
                <elementReference>emailReclamante</elementReference>
            </value>
        </inputParameters>
        <inputParameters>
            <name>sendRichBody</name>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </inputParameters>
        <inputParameters>
            <name>emailSubject</name>
            <value>
                <elementReference>subjectTemplateReclamante</elementReference>
            </value>
        </inputParameters>
        <nameSegment>emailSimple</nameSegment>
    </actionCalls>
    <apiVersion>53.0</apiVersion>
    <areMetricsLoggedToDataCloud>false</areMetricsLoggedToDataCloud>
    <assignments>
        <name>AsignarAccionModificada</name>
        <label>AsignarAccionModificada</label>
        <locationX>1277</locationX>
        <locationY>917</locationY>
        <assignmentItems>
            <assignToReference>listaAccionesUpdatear</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>loopAcciones</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loopAcciones</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>asignarCheckValidacion</name>
        <label>asignarCheckValidacion</label>
        <locationX>1187</locationX>
        <locationY>1312</locationY>
        <assignmentItems>
            <assignToReference>loopAccionesValidacion.SAC_SaltarValidacion__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>false</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>asignarListaAccionesFinal</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>asignarCuerpoEmailReclamacion</name>
        <label>asignarCuerpoEmailReclamacion</label>
        <locationX>1276</locationX>
        <locationY>370</locationY>
        <assignmentItems>
            <assignToReference>emailSubject</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>loopEmailTemplate.Subject</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>emailHTMLValue</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>loopEmailTemplate.HtmlValue</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loopEmailTemplate</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>asignarCuerpoEmailReclamante</name>
        <label>asignarCuerpoEmailReclamante</label>
        <locationX>1401</locationX>
        <locationY>654</locationY>
        <assignmentItems>
            <assignToReference>subjectTemplateReclamante</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>loopEmailTemplate.Subject</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>htmlValueTemplateReclamante</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>loopEmailTemplate.HtmlValue</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loopEmailTemplate</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>asignarEmailCuerpoConsulta</name>
        <label>asignarEmailCuerpoConsulta</label>
        <locationX>1480</locationX>
        <locationY>510</locationY>
        <assignmentItems>
            <assignToReference>subjectEmailTemplateConsulta</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loopEmailTemplate.Subject</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>htmlValueTemplateConsulta</assignToReference>
            <operator>Assign</operator>
            <value>
                <elementReference>loopEmailTemplate.HtmlValue</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loopEmailTemplate</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>asignarEstadoFinalizado</name>
        <label>asignarEstadoFinalizado</label>
        <locationX>1457</locationX>
        <locationY>829</locationY>
        <assignmentItems>
            <assignToReference>loopAcciones.SAC_Estado__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>SAC_FinalizadaIncompleta</stringValue>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>loopAcciones.SAC_SaltarValidacion__c</assignToReference>
            <operator>Assign</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>AsignarAccionModificada</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>asignarListaAccionesFinal</name>
        <label>asignarListaAccionesFinal</label>
        <locationX>979</locationX>
        <locationY>1313</locationY>
        <assignmentItems>
            <assignToReference>listaAccionesFinal</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>loopAccionesValidacion</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loopAccionesValidacion</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>asignarPlantillaConsulta</name>
        <label>asignarPlantillaConsulta</label>
        <locationX>506</locationX>
        <locationY>662</locationY>
        <assignmentItems>
            <assignToReference>plantillaConsultaId</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>loopPlantillas.SAC_PlantillaDerivacionId__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loopPlantillas</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>asignarPlantillaReclamacion</name>
        <label>asignarPlantillaReclamacion</label>
        <locationX>684</locationX>
        <locationY>530</locationY>
        <assignmentItems>
            <assignToReference>plantillaReclamacionId</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>loopPlantillas.SAC_PlantillaDerivacionId__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loopPlantillas</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>asignarPlantillaReclamante</name>
        <label>asignarPlantillaReclamante</label>
        <locationX>683</locationX>
        <locationY>898</locationY>
        <assignmentItems>
            <assignToReference>plantillaReclamanteId</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>loopPlantillas.SAC_PlantillaDerivacionId__c</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loopPlantillas</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>casoModificado1</name>
        <label>casoModificado1</label>
        <locationX>1735</locationX>
        <locationY>582</locationY>
        <assignmentItems>
            <assignToReference>listaUpdatear</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>loopRecPret</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loopRecPret</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>casoModificado2</name>
        <label>casoModificado2</label>
        <locationX>1737</locationX>
        <locationY>759</locationY>
        <assignmentItems>
            <assignToReference>listaUpdatear</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>loopRecPret</elementReference>
            </value>
        </assignmentItems>
        <assignmentItems>
            <assignToReference>emailReclamante</assignToReference>
            <operator>Add</operator>
            <value>
                <elementReference>loopRecPret.Account.PersonEmail</elementReference>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>loopRecPret</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>pretensionBaja</name>
        <label>pretensionBaja</label>
        <locationX>1974</locationX>
        <locationY>518</locationY>
        <assignmentItems>
            <assignToReference>loopRecPret.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>SAC_009</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>casoModificado1</targetReference>
        </connector>
    </assignments>
    <assignments>
        <name>reclamacionDerivada</name>
        <label>reclamacionDerivada</label>
        <locationX>1974</locationX>
        <locationY>830</locationY>
        <assignmentItems>
            <assignToReference>loopRecPret.Status</assignToReference>
            <operator>Assign</operator>
            <value>
                <stringValue>SAC_008</stringValue>
            </value>
        </assignmentItems>
        <connector>
            <targetReference>casoModificado2</targetReference>
        </connector>
    </assignments>
    <decisions>
        <name>Es_Pretension</name>
        <label>Es Pretension</label>
        <locationX>1968</locationX>
        <locationY>670</locationY>
        <defaultConnector>
            <targetReference>reclamacionDerivada</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>False</defaultConnectorLabel>
        <rules>
            <name>esPretension</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>loopRecPret.RecordTypeId</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>recordTypePretensionId</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>pretensionBaja</targetReference>
            </connector>
            <label>esPretension</label>
        </rules>
    </decisions>
    <decisions>
        <name>isPlantillaReclamacion</name>
        <label>isPlantillaReclamacion</label>
        <locationX>678</locationX>
        <locationY>720</locationY>
        <defaultConnectorLabel>False</defaultConnectorLabel>
        <rules>
            <name>esPlantillaReclamacion</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>loopPlantillas.Id</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>idPlantillaDelGrupo</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>asignarPlantillaReclamacion</targetReference>
            </connector>
            <label>Es plantilla Reclamación</label>
        </rules>
        <rules>
            <name>esPlantillaConsulta</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>loopPlantillas.Id</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>idPlantillaConsulta</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>asignarPlantillaConsulta</targetReference>
            </connector>
            <label>Es plantilla Consulta</label>
        </rules>
        <rules>
            <name>esPlantillaReclamante</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>loopPlantillas.Id</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>idPlantillaReclamante</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>asignarPlantillaReclamante</targetReference>
            </connector>
            <label>Es plantilla Reclamante</label>
        </rules>
    </decisions>
    <decisions>
        <name>isTemplateReclamacion</name>
        <label>isTemplateReclamacion</label>
        <locationX>1306</locationX>
        <locationY>513</locationY>
        <defaultConnectorLabel>False</defaultConnectorLabel>
        <rules>
            <name>asignarEmailTemplateReclamacion</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>loopEmailTemplate.Id</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>plantillaReclamacionId</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>asignarCuerpoEmailReclamacion</targetReference>
            </connector>
            <label>asignarEmailTemplateReclamacion</label>
        </rules>
        <rules>
            <name>asignarEmailTemplateReclamante</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>loopEmailTemplate.Id</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>plantillaReclamanteId</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>asignarCuerpoEmailReclamante</targetReference>
            </connector>
            <label>asignarEmailTemplateReclamante</label>
        </rules>
        <rules>
            <name>asignarEmailTemplateConsulta</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>loopEmailTemplate.Id</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <elementReference>plantillaConsultaId</elementReference>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>asignarEmailCuerpoConsulta</targetReference>
            </connector>
            <label>asignarEmailTemplateConsulta</label>
        </rules>
    </decisions>
    <decisions>
        <name>queTipoDeCasoEs</name>
        <label>queTipoDeCasoEs</label>
        <locationX>1137</locationX>
        <locationY>98</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>esConsulta</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getCase.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SAC_Consulta</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>rellenarEmailConsulta</targetReference>
            </connector>
            <label>esConsulta</label>
        </rules>
        <rules>
            <name>esReclamacion1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getCase.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SAC_Reclamacion</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>rellenarEmail</targetReference>
            </connector>
            <label>esReclamacion</label>
        </rules>
    </decisions>
    <decisions>
        <name>queTipoDeCasoEs1</name>
        <label>queTipoDeCasoEs</label>
        <locationX>784</locationX>
        <locationY>270</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>EsConsulta1</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getCase.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SAC_Consulta</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>ScreenConsulta</targetReference>
            </connector>
            <label>EsConsulta</label>
        </rules>
        <rules>
            <name>EsReclamacion</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getCase.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SAC_Reclamacion</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>SAC_Advertencia</targetReference>
            </connector>
            <label>EsReclamacion</label>
        </rules>
    </decisions>
    <decisions>
        <name>queTipoDeCasoEs_0</name>
        <label>queTipoDeCasoEs</label>
        <locationX>1546</locationX>
        <locationY>1528</locationY>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>esConsulta_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getCase.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SAC_Consulta</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>PantallaFinal</targetReference>
            </connector>
            <label>esConsulta</label>
        </rules>
        <rules>
            <name>esReclamacion1_0</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getCase.RecordType.DeveloperName</leftValueReference>
                <operator>EqualTo</operator>
                <rightValue>
                    <stringValue>SAC_Reclamacion</stringValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>getAcciones</targetReference>
            </connector>
            <label>esReclamacion</label>
        </rules>
    </decisions>
    <decisions>
        <name>TieneCuentaInformada</name>
        <label>TieneCuentaInformada</label>
        <locationX>419</locationX>
        <locationY>295</locationY>
        <defaultConnector>
            <targetReference>getRecordType</targetReference>
        </defaultConnector>
        <defaultConnectorLabel>Default Outcome</defaultConnectorLabel>
        <rules>
            <name>NoTieneCuenta</name>
            <conditionLogic>and</conditionLogic>
            <conditions>
                <leftValueReference>getCase.Account.Id</leftValueReference>
                <operator>IsNull</operator>
                <rightValue>
                    <booleanValue>true</booleanValue>
                </rightValue>
            </conditions>
            <connector>
                <targetReference>noTienesClienteInformado</targetReference>
            </connector>
            <label>NoTieneCuenta</label>
        </rules>
    </decisions>
    <description>Derivar una reclamación a otro departamento</description>
    <dynamicChoiceSets>
        <name>choiceSet</name>
        <dataType>String</dataType>
        <displayField>Name</displayField>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SAC_PermiteDerivacion__c</field>
            <operator>EqualTo</operator>
            <value>
                <booleanValue>true</booleanValue>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordTypeGrupoProveedor</elementReference>
            </value>
        </filters>
        <object>CC_Grupo_Colaborador__c</object>
        <outputAssignments>
            <assignToReference>emailPara</assignToReference>
            <field>SAC_Email__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>idPlantillaConsulta</assignToReference>
            <field>SAC_PlantillaConsulta__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>idPlantillaDelGrupo</assignToReference>
            <field>SAC_PlantillaReclamacion__c</field>
        </outputAssignments>
        <outputAssignments>
            <assignToReference>idPlantillaReclamante</assignToReference>
            <field>SAC_PlantillaReclamante__c</field>
        </outputAssignments>
        <valueField>Name</valueField>
    </dynamicChoiceSets>
    <interviewLabel>Derivar {!$Flow.CurrentDateTime}</interviewLabel>
    <label>SAC_Derivar</label>
    <loops>
        <name>loopAcciones</name>
        <label>loopAcciones</label>
        <locationX>1457</locationX>
        <locationY>1030</locationY>
        <collectionReference>getAcciones</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>asignarEstadoFinalizado</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>updateAcciones</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>loopAccionesValidacion</name>
        <label>loopAccionesValidacion</label>
        <locationX>1077</locationX>
        <locationY>1098</locationY>
        <collectionReference>listaAccionesUpdatear</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>asignarCheckValidacion</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>updateAccionesFinal</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>loopEmailTemplate</name>
        <label>loopEmailTemplate</label>
        <locationX>1150</locationX>
        <locationY>546</locationY>
        <collectionReference>getEmailBody</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>isTemplateReclamacion</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>queTipoDeCasoEs</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>loopPlantillas</name>
        <label>loopPlantillas</label>
        <locationX>986</locationX>
        <locationY>712</locationY>
        <collectionReference>getPlantillaBody</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>isPlantillaReclamacion</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>getEmailBody</targetReference>
        </noMoreValuesConnector>
    </loops>
    <loops>
        <name>loopRecPret</name>
        <label>loopRecPret</label>
        <locationX>1580</locationX>
        <locationY>658</locationY>
        <collectionReference>getCasoYsusPretensiones</collectionReference>
        <iterationOrder>Asc</iterationOrder>
        <nextValueConnector>
            <targetReference>Es_Pretension</targetReference>
        </nextValueConnector>
        <noMoreValuesConnector>
            <targetReference>enviarMailReclamante</targetReference>
        </noMoreValuesConnector>
    </loops>
    <processMetadataValues>
        <name>BuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>CanvasMode</name>
        <value>
            <stringValue>FREE_FORM_CANVAS</stringValue>
        </value>
    </processMetadataValues>
    <processMetadataValues>
        <name>OriginBuilderType</name>
        <value>
            <stringValue>LightningFlowBuilder</stringValue>
        </value>
    </processMetadataValues>
    <processType>Flow</processType>
    <recordLookups>
        <name>getAcciones</name>
        <label>getAcciones</label>
        <locationX>1483</locationX>
        <locationY>1229</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>loopAcciones</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>SAC_Reclamacion__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>SAC_Accion__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>getCase</name>
        <label>getCase</label>
        <locationX>350</locationX>
        <locationY>178</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>TieneCuentaInformada</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>true</getFirstRecordOnly>
        <object>Case</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>getCasoYsusPretensiones</name>
        <label>getCasoYsusPretensiones</label>
        <locationX>1732</locationX>
        <locationY>407</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>loopRecPret</targetReference>
        </connector>
        <filterLogic>1 OR (2 AND 3)</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <filters>
            <field>RecordTypeId</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordTypePretensionId</elementReference>
            </value>
        </filters>
        <filters>
            <field>SAC_Reclamacion__c</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>recordId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>Case</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>getEmailBody</name>
        <label>getEmailBody</label>
        <locationX>1151</locationX>
        <locationY>713</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>loopEmailTemplate</targetReference>
        </connector>
        <filterLogic>or</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>plantillaReclamacionId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>plantillaReclamanteId</elementReference>
            </value>
        </filters>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>plantillaConsultaId</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>EmailTemplate</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>getPlantillaBody</name>
        <label>getPlantillaBody</label>
        <locationX>986</locationX>
        <locationY>401</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>loopPlantillas</targetReference>
        </connector>
        <filterLogic>or</filterLogic>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>idPlantillaDelGrupo</elementReference>
            </value>
        </filters>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>idPlantillaReclamante</elementReference>
            </value>
        </filters>
        <filters>
            <field>Id</field>
            <operator>EqualTo</operator>
            <value>
                <elementReference>idPlantillaConsulta</elementReference>
            </value>
        </filters>
        <getFirstRecordOnly>false</getFirstRecordOnly>
        <object>SAC_PlantillaRedaccion__c</object>
        <storeOutputAutomatically>true</storeOutputAutomatically>
    </recordLookups>
    <recordLookups>
        <name>getRecordType</name>
        <label>getRecordType</label>
        <locationX>603</locationX>
        <locationY>354</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>Seleccionar_Grupos</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>SAC_GrupoProveedores</stringValue>
            </value>
        </filters>
        <object>RecordType</object>
        <outputAssignments>
            <assignToReference>recordTypeGrupoProveedor</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordLookups>
        <name>getRecordTypePretension</name>
        <label>getRecordTypePretension</label>
        <locationX>1608</locationX>
        <locationY>405</locationY>
        <assignNullValuesIfNoRecordsFound>false</assignNullValuesIfNoRecordsFound>
        <connector>
            <targetReference>getCasoYsusPretensiones</targetReference>
        </connector>
        <filterLogic>and</filterLogic>
        <filters>
            <field>DeveloperName</field>
            <operator>EqualTo</operator>
            <value>
                <stringValue>SAC_Pretension</stringValue>
            </value>
        </filters>
        <object>RecordType</object>
        <outputAssignments>
            <assignToReference>recordTypePretensionId</assignToReference>
            <field>Id</field>
        </outputAssignments>
    </recordLookups>
    <recordUpdates>
        <name>updateAcciones</name>
        <label>updateAcciones</label>
        <locationX>1195</locationX>
        <locationY>1096</locationY>
        <connector>
            <targetReference>loopAccionesValidacion</targetReference>
        </connector>
        <inputReference>listaAccionesUpdatear</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>updateAccionesFinal</name>
        <label>updateAccionesFinal</label>
        <locationX>887</locationX>
        <locationY>1096</locationY>
        <connector>
            <targetReference>Fin</targetReference>
        </connector>
        <inputReference>listaAccionesFinal</inputReference>
    </recordUpdates>
    <recordUpdates>
        <name>updateCasos</name>
        <label>updateCasos</label>
        <locationX>1901</locationX>
        <locationY>1528</locationY>
        <connector>
            <targetReference>queTipoDeCasoEs_0</targetReference>
        </connector>
        <inputReference>listaUpdatear</inputReference>
    </recordUpdates>
    <screens>
        <name>Fin</name>
        <label>Fin</label>
        <locationX>576</locationX>
        <locationY>1194</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>SAC_fin</name>
            <fieldText>&lt;p&gt;¡Listo! El caso se ha derivado correctamente.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>false</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>noTienesClienteInformado</name>
        <label>No tienes Cliente informado</label>
        <locationX>260</locationX>
        <locationY>433</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>contenido</name>
            <fieldText>&lt;p&gt;No tiene cliente informado, no se puede derivar.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>false</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>PantallaFinal</name>
        <label>PantallaFinal</label>
        <locationX>841</locationX>
        <locationY>1535</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <fields>
            <name>ConsultaDerivadaCorrectamente</name>
            <fieldText>&lt;p&gt;Se ha derivado correctamente la Consulta.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>false</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>rellenarEmail</name>
        <label>rellenarEmail</label>
        <locationX>1333</locationX>
        <locationY>255</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>Email</targetReference>
        </connector>
        <fields>
            <name>Para</name>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>emailPara</elementReference>
            </defaultValue>
            <fieldText>Para:</fieldText>
            <fieldType>InputField</fieldType>
            <helpText>&lt;p&gt;Introducir los emails separados por comas&lt;/p&gt;</helpText>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Asunto</name>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>emailSubject</elementReference>
            </defaultValue>
            <fieldText>Asunto:</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>richTextMensaje</name>
            <extensionName>c:SAC_RichTextEmail</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>mensajeEmail</name>
                <value>
                    <elementReference>emailHTMLValue</elementReference>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>rellenarEmailConsulta</name>
        <label>rellenarEmailConsulta</label>
        <locationX>1439</locationX>
        <locationY>88</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>EnviarEmail</targetReference>
        </connector>
        <fields>
            <name>Para_0</name>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>emailPara</elementReference>
            </defaultValue>
            <fieldText>Para:</fieldText>
            <fieldType>InputField</fieldType>
            <helpText>&lt;p&gt;Introducir los emails separados por comas&lt;/p&gt;</helpText>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>Asunto_0</name>
            <dataType>String</dataType>
            <defaultValue>
                <elementReference>subjectEmailTemplateConsulta</elementReference>
            </defaultValue>
            <fieldText>Asunto de la consulta:</fieldText>
            <fieldType>InputField</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <fields>
            <name>richTextMensaje_0</name>
            <extensionName>c:SAC_RichTextEmail</extensionName>
            <fieldType>ComponentInstance</fieldType>
            <inputParameters>
                <name>mensajeEmail</name>
                <value>
                    <elementReference>htmlValueTemplateConsulta</elementReference>
                </value>
            </inputParameters>
            <inputsOnNextNavToAssocScrn>UseStoredValues</inputsOnNextNavToAssocScrn>
            <isRequired>true</isRequired>
            <storeOutputAutomatically>true</storeOutputAutomatically>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <description>pop up advertencia de que se va a derivar la reclamación</description>
        <name>SAC_Advertencia</name>
        <label>Advertencia</label>
        <locationX>840</locationX>
        <locationY>434</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>getPlantillaBody</targetReference>
        </connector>
        <fields>
            <name>SAC_AdvertenciaMensaje</name>
            <fieldText>&lt;p&gt;¿Está seguro de que quiere derivar la reclamación? El expediente quedará cerrado y se le notificará al reclamante su resolución.&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>ScreenConsulta</name>
        <label>Consulta</label>
        <locationX>951</locationX>
        <locationY>265</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>getPlantillaBody</targetReference>
        </connector>
        <fields>
            <name>AvertenciaConsulta</name>
            <fieldText>&lt;p&gt;¿Esta seguro que quiere derivar la consulta?&lt;/p&gt;</fieldText>
            <fieldType>DisplayText</fieldType>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <screens>
        <name>Seleccionar_Grupos</name>
        <label>Seleccionar Grupos</label>
        <locationX>715</locationX>
        <locationY>386</locationY>
        <allowBack>true</allowBack>
        <allowFinish>true</allowFinish>
        <allowPause>true</allowPause>
        <connector>
            <targetReference>queTipoDeCasoEs1</targetReference>
        </connector>
        <fields>
            <name>Grupos</name>
            <choiceReferences>choiceSet</choiceReferences>
            <dataType>String</dataType>
            <fieldText>Grupos</fieldText>
            <fieldType>DropdownBox</fieldType>
            <isRequired>true</isRequired>
        </fields>
        <showFooter>true</showFooter>
        <showHeader>false</showHeader>
    </screens>
    <start>
        <locationX>50</locationX>
        <locationY>50</locationY>
        <connector>
            <targetReference>getCase</targetReference>
        </connector>
    </start>
    <status>Obsolete</status>
    <variables>
        <name>emailHTMLValue</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>emailPara</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>emailReclamante</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>emailSubject</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>htmlValueTemplateConsulta</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>htmlValueTemplateReclamante</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>idPlantillaConsulta</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>idPlantillaDelGrupo</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>idPlantillaReclamante</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>idRecordTypePlantillaDeri</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>listaAccionesFinal</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SAC_Accion__c</objectType>
    </variables>
    <variables>
        <name>listaAccionesUpdatear</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>SAC_Accion__c</objectType>
    </variables>
    <variables>
        <name>listaUpdatear</name>
        <dataType>SObject</dataType>
        <isCollection>true</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
        <objectType>Case</objectType>
    </variables>
    <variables>
        <name>plantillaConsultaId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>plantillaDerivacionId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>plantillaReclamacionId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>plantillaReclamanteId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>recordId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>true</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>recordType</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>recordTypeGrupoProveedor</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>recordTypePretensionId</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>subjectEmailTemplateConsulta</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
    <variables>
        <name>subjectTemplateReclamante</name>
        <dataType>String</dataType>
        <isCollection>false</isCollection>
        <isInput>false</isInput>
        <isOutput>false</isOutput>
    </variables>
</Flow>
