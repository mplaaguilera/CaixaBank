<template>
    <article class="slds-card" style="min-height: 100px;">

        <!--Presentación de las transcripción recuperadas-->
        <template lwc:if={historyChat.length}>
            <ul>
                <!--Para cada transcripcíon-->
                <template for:each={historyChat} for:item="chat">
                    <!--Cabecera-->
                    <li key={chat.id} class="slds-chat-listitem slds-chat-listitem_bookend">
                        <div class="slds-chat-bookend">
                            <span class="slds-icon_container slds-icon-utility-chat slds-chat-icon">
                                <lightning-icon icon-name="utility:chat" size="x-small"></lightning-icon>
                            </span>
                            <p>{chat.inicio}<b>{chat.inicio2}</b></p>
                        </div>
                    </li>

                    <!--Mensaje-->
                    <li key={chat.id} lwc:if={chat.mensajes}>
                        <template for:each={chat.mensajes} for:item="msg">
                            <div lwc:if={msg.cliente} class="slds-chat-listitem slds-chat-listitem_inbound" key={msg.id}>
                                <div class="slds-chat-message">
                                    <!--
                                    <span aria-hidden="true" class="slds-avatar slds-avatar_circle slds-chat-avatar">
                                        <abbr class="slds-avatar__initials slds-avatar__initials_inverse" title="Cliente">Cliente</abbr>
                                    </span>
                                    -->
                                    <div class="slds-chat-message__body">
                                        <div class="slds-chat-message__text slds-chat-message__text_inbound">
                                            <!-- <div class="slds-chat-message__text"> -->
                                            <span>
                                                <lightning-formatted-rich-text value={msg.texto}></lightning-formatted-rich-text>
                                            </span>
                                        </div>
                                        <div class="slds-chat-message__meta" aria-label="nombre-hora">
                                            {msg.nombre} • {msg.hora}
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div lwc:elseif={msg.hidden} class="slds-chat-listitem slds-chat-listitem_outbound" key={msg.id}>
                                <div class="slds-chat-message">
                                    <div class="slds-chat-message__body">
                                        <div class="slds-chat-message__text slds-chat-message__text_outbound">
                                            <!-- <div class="slds-chat-message__text"> -->
                                            <span>
                                                <lightning-formatted-rich-text value={msg.texto}></lightning-formatted-rich-text>
                                            </span>
                                        </div>
                                        <div class="slds-chat-message__meta" aria-label="nombre-hora">
                                            {msg.nombre} • {msg.hora}
                                        </div>
                                    </div>
                                    <!--
                                    <span aria-hidden="true" class="slds-avatar slds-avatar_circle slds-chat-avatar">
                                        <abbr class="slds-avatar__initials slds-avatar__initials_inverse" title="ChatBot">ChatBot</abbr>
                                    </span>
                                    -->
                                </div>
                            </div>
                            <div lwc:else class="slds-chat-listitem slds-chat-listitem_outbound" key={msg.id}>
                                <div class="slds-chat-message">
                                    <div class="slds-chat-message__body">
                                        <div class="slds-chat-message__text slds-chat-message__text_outbound-agent">
                                            <!-- <div class="slds-chat-message__text"> -->
                                            <span>
                                                <lightning-formatted-rich-text value={msg.texto}></lightning-formatted-rich-text>
                                            </span>
                                        </div>
                                        <div class="slds-chat-message__meta" aria-label="nombre-hora">
                                            {msg.nombre} • {msg.hora}
                                        </div>
                                    </div>
                                    <!--<span aria-hidden="true" class="slds-avatar slds-avatar_circle slds-chat-avatar">
                                        <abbr class="slds-avatar__initials slds-avatar__initials_inverse" title="ChatBot">ChatBot</abbr>
                                    </span>-->
                                </div>
                            </div>
                        </template>
                    </li>

                    <!--Pie-->
                    <li key={chat.id} class="slds-chat-listitem slds-chat-listitem_bookend">
                        <div class="slds-chat-bookend slds-chat-bookend_stop">
                            <span class="slds-icon_container slds-icon-utility-end_chat slds-chat-icon">
                                <lightning-icon icon-name="utility:end_chat" size="x-small"></lightning-icon>
                            </span>
                            <p>{chat.fin}<b>{chat.fin2}</b></p>
                        </div>
                    </li>
                </template>
            </ul>
        </template>

        <template lwc:elseif={vacio}> <!-- lwc:if={vacio.data} -->
            <div class="slds-scoped-notification slds-media slds-media_center slds-scoped-notification_light" role="status">
                <div class="slds-media__figure">
                    <span class="slds-icon_container">
                        <lightning-icon icon-name="utility:info" size="small"></lightning-icon>
                    </span>
                </div>
                <div class="slds-media__body">
                    <p>Sin transcripciones de chat que mostrar.</p>
                </div>
            </div>
        </template>

    </article>
</template>