<template>
    <lightning-record-edit-form record-id={idFormularioCaso} object-api-name="SPV_Formulario__c" record-type-id ={recordTypeId} onsubmit={handleSubmit} onsuccess={handleSuccess}>    
        <div class={toggleIconReclamacionesAJN}>
            <h1 class="slds-section__title">
                <button aria-controls="expando-unique-id-ajn" aria-expanded="true" class="slds-button slds-section__title-action" onclick={handleExpandableReclamacionesAJN}>
                <svg class="slds-section__title-action-icon slds-button__icon slds-button__icon_left" aria-hidden="true">
                    <use xlink:href="/_slds/icons/utility-sprite/svg/symbols.svg#switch"></use>
                </svg>
                <span class="slds-truncate" title="Section Title"> Reclamaciones de Formato AJN</span>
                </button>
            </h1>
            <div class="slds-section__content" id="expando-unique-id-ajn">
                <div class="slds-grid slds-gutters slds-m-bottom_medium slds-wrap">
                    <lightning-input-field field-name="SPV_Caso__c" value={recordId} class="slds-hide"></lightning-input-field>
                    <template lwc:if={camposReadOnly}>
                    <div class="slds-col slds-size_6-of-12">
                        <lightning-output-field field-name="SPV_Resena__c"> </lightning-output-field>
                    </div>
                    <div class="slds-col slds-size_6-of-12">
                        <lightning-output-field field-name="SPV_Mejoras__c"> </lightning-output-field>
                    </div>
                    <div class="slds-col slds-size_6-of-12">
                        <lightning-output-field field-name="SPV_Riesgos__c"> </lightning-output-field>
                    </div>
                    <div class="slds-col slds-size_12-of-12" style="margin-bottom: 20px;margin-top: 20px;">
                        Funcionamiento de SAC
                    </div>
                    <div class="slds-col slds-size_5-of-12">
                        <lightning-output-field field-name="SPV_EmisionPlazo__c"> </lightning-output-field>
                    </div>
                    <div class="slds-col slds-size_5-of-12">
                        <lightning-output-field field-name="SPV_EmisionSAC__c"> </lightning-output-field>
                    </div>
                    <div class="slds-col slds-size_5-of-12">
                        <lightning-output-field field-name="SPV_CongruenciaSAC__c"> </lightning-output-field>
                    </div>
                    <div class="slds-col slds-size_5-of-12">
                        <lightning-output-field field-name="SPV_ColaboracionBDE__c"> </lightning-output-field>
                    </div>
                    <div class="slds-col slds-size_5-of-12">
                        <lightning-output-field field-name="SPV_CalidadRespuesta__c"> </lightning-output-field>
                    </div>
                    <div class="slds-col slds-size_5-of-12">
                        <lightning-output-field field-name="SPV_RecomendacionesAbogados__c"> </lightning-output-field>
                    </div>
                    </template>
                    <!-- READ ONLY ///////////////////////////////////////////////////////////////////////////////////////-->
                    <template lwc:else> 
                    <div class="slds-col slds-size_6-of-12">
                        <lightning-input-field field-name="SPV_Resena__c"> </lightning-input-field>
                    </div>
                    <div class="slds-col slds-size_6-of-12">
                        <lightning-input-field field-name="SPV_Mejoras__c"> </lightning-input-field>
                    </div>
                    <div class="slds-col slds-size_6-of-12">
                        <lightning-input-field field-name="SPV_Riesgos__c"> </lightning-input-field>
                    </div>
                    <div class="slds-col slds-size_12-of-12" style="margin-bottom: 20px;margin-top: 20px;">
                        Funcionamiento de SAC
                    </div>
                    <div class="slds-col slds-size_5-of-12">
                        <lightning-input-field field-name="SPV_EmisionPlazo__c"> </lightning-input-field>
                    </div>
                    <div class="slds-col slds-size_5-of-12">
                        <lightning-input-field field-name="SPV_EmisionSAC__c"> </lightning-input-field>
                    </div>
                    <div class="slds-col slds-size_5-of-12">
                        <lightning-input-field field-name="SPV_CongruenciaSAC__c"> </lightning-input-field>
                    </div>
                    <div class="slds-col slds-size_5-of-12">
                        <lightning-input-field field-name="SPV_ColaboracionBDE__c"> </lightning-input-field>
                    </div>
                    <div class="slds-col slds-size_5-of-12">
                        <lightning-input-field field-name="SPV_CalidadRespuesta__c"> </lightning-input-field>
                    </div>
                    <div class="slds-col slds-size_5-of-12">
                        <lightning-input-field field-name="SPV_RecomendacionesAbogados__c"> </lightning-input-field>
                    </div>
                    </template>
                </div>
            </div>
        </div>
        <!-- <div class={toggleAnalisisBDE}>
            <h1 class="slds-section__title">
                <button aria-controls="expando-unique-id-analisis" aria-expanded="true" class="slds-button slds-section__title-action" onclick={handleExpandableAnalisisBDE}>
                <svg class="slds-section__title-action-icon slds-button__icon slds-button__icon_left" aria-hidden="true">
                    <use xlink:href="/_slds/icons/utility-sprite/svg/symbols.svg#switch"></use>
                </svg>
                <span class="slds-truncate" title="Section Title"> Análisis BDE</span>
                </button>
            </h1>
            <div class="slds-section__content" id="expando-unique-id-analisis">
                <div class="slds-grid slds-gutters slds-m-bottom_medium slds-wrap">

                </div>
            </div>
        </div> -->
        <div class={toggleIconPropuestaRect}>
            <h1 class="slds-section__title">
                <button aria-controls="expando-unique-id-propuesta" aria-expanded="true" class="slds-button slds-section__title-action" onclick={handleExpandablePropuestaRect}>
                <svg class="slds-section__title-action-icon slds-button__icon slds-button__icon_left" aria-hidden="true">
                    <use xlink:href="/_slds/icons/utility-sprite/svg/symbols.svg#switch"></use>
                </svg>
                <span class="slds-truncate" title="Section Title">Propuesta de Rectificación</span>
                </button>
            </h1>
            <div class="slds-section__content" id="expando-unique-id-propuesta">
                <div class="slds-grid slds-gutters slds-m-bottom_medium slds-wrap">
                    <lightning-input-field field-name="SPV_Caso__c" value={recordId} class="slds-hide"></lightning-input-field>
                    <template lwc:if={camposReadOnly}>
                        <div class="slds-col slds-size_6-of-12">
                            <lightning-output-field field-name="SPV_PropuestaRectificacion__c"> </lightning-output-field>
                        </div>
                        <div class="slds-col slds-size_6-of-12">
                            <lightning-output-field field-name="SPV_InstruccionesRect__c"> </lightning-output-field>
                        </div>
                    </template>
                    <template lwc:else>
                        <div class="slds-col slds-size_6-of-12">
                            <lightning-input-field field-name="SPV_PropuestaRectificacion__c"> </lightning-input-field>
                        </div>
                        <div class="slds-col slds-size_6-of-12">
                            <lightning-input-field field-name="SPV_InstruccionesRect__c"> </lightning-input-field>
                        </div>
                    </template>
                </div>
            </div>
            <div class="slds-grid slds-gutters slds-m-bottom_medium slds-wrap"> 
                <div lwc:if={tienePermisosEditar} class="slds-col slds-size_1-of-1" style="margin-bottom: 10px;margin-top: 10px;">   
                    <lightning-button data-name="botonGuardar" class="slds-float_right" variant="brand" type="submit" label="Guardar" ></lightning-button>
                </div>
            </div>
        </div>
        <div class={toggleIconListadoRectificaciones}>
            <h1 class="slds-section__title">
                <button aria-controls="expando-unique-id-rectificaciones" aria-expanded="true" class="slds-button slds-section__title-action" onclick={handleExpandableListadoRectificaciones}>
                <svg class="slds-section__title-action-icon slds-button__icon slds-button__icon_left" aria-hidden="true">
                    <use xlink:href="/_slds/icons/utility-sprite/svg/symbols.svg#switch"></use>
                </svg>
                <span class="slds-truncate" title="Section Title">Rectificaciones anteriores</span>
                </button>
            </h1>
            <div class="slds-section__content" id="expando-unique-id-rectificaciones">
                <div style="height: 300px;">
                    <lightning-datatable
                            key-field="id"
                            data={rectificaciones}
                            columns={columns}
                            hide-checkbox-column="true">
                    </lightning-datatable>
                </div>
            </div>
        </div>
    </lightning-record-edit-form>
   <!-- spinner -->
   <template lwc:if={spinnerLoading}>
    <div class="slds-p-around_x-large">
        <lightning-spinner alternative-text="Loading" size="large" variant="brand"></lightning-spinner>
    </div>
    </template>
</template>