<template>
    <!-- <div class="container "> -->
    <div class="container slds-scrollable_y">
        <div style="margin-bottom:1.25rem">
            <b>Permisos que has cedido</b>
            <div if:false={emptyGived}>
                <!-- INICIO BUCLE -->
                <template for:each={givedPermision} for:item="perm">
                    <div key={perm.Id} class="slds-card cedidos layoutMargin" style="display:flex">
                        <div class="" style="width:80%">
                            <article class="slds-tile slds-media">
                                <lightning-icon icon-name="standard:portal" alternative-text="Portal" title="Portal">
                                </lightning-icon>
                                <div class="slds-media__body" style="width:100%;margin-left:.5rem;margin-top:-.3rem">
                                    <h3 class="slds-tile__title slds-truncate slds-text-title_bold">
                                        Cedido a:
                                        <span if:true={perm.link}>&nbsp;&nbsp;<a name={perm.AV_ContactoUsuarioCedido__c}
                                                onclick={getContactRecord} href="#">
                                                {perm.AV_UsuarioCedido__r.Name}</a></span>
                                        <span if:false={perm.link}>&nbsp;&nbsp; {perm.AV_UsuarioCedido__r.Name}</span>
                                    </h3>
                                    <div class="" style="margin-top:.25em">
                                        <dl class="slds-list_horizontal slds-wrap" style="width:fit-content">

                                            <dt title="Periodo de permiso">Inicio:
                                                &nbsp;{perm.AV_InicioPermisoFormat__c} - Final:
                                                &nbsp;{perm.AV_FinalPermisoFormat__c}</dt>
                                        </dl>
                                    </div>
                                </div>
                            </article>
                        </div>
                        <div style="width:20%;text-align: right">
                            <lightning-button-menu alternative-text="Show menu" menu-alignment="right">
                                <lightning-menu-item value="Editar" label="Editar" name={perm} onclick={updatePermiso}>
                                </lightning-menu-item>
                                <lightning-menu-item value="Eliminar" label="Eliminar" name={perm.Id}
                                    onclick={deletePermiso}></lightning-menu-item>
                            </lightning-button-menu>
                        </div>
                    </div>
                </template>
            </div>
            <div if:true={emptyGived}>

                <lightning-badge style="margin-top:1rem;font-size:1rem" label="No has dado ningun permiso" type="media">
                </lightning-badge>

            </div>
            <!-- FIN BUCLE -->
        </div>
        <div class="slds-scrollable;max-height:30px">
            <b>Permisos que te han cedido</b>
            <div if:false={emptyGiven}>
                <template for:each={givenPermision} for:item="perm">
                    <div key={perm.Id} class="layoutMargin slds-border_bottom">
                        <div style="width:30rem">
                            <article class="slds-tile slds-media layoutMarginGiven">
                                <div class="slds-media__figure">
                                    <lightning-icon icon-name="standard:account" alternative-text="Portal"
                                        title="Portal">
                                    </lightning-icon>

                                </div>
                                <div class="slds-media__body">
                                    <h3 class="slds-tile__title slds-truncate" title="Salesforce UX">
                                        <a href="#" name={perm.AV_OficinaCedida__c}
                                            onclick={getOfficeRecord}>{perm.AV_OficinaCedida__r.Name}</a>
                                    </h3>
                                    <div class="slds-tile__detail">
                                        <dl class="slds-list_vertical">
                                            <dt class="slds-item_label slds-text-color_weak slds-truncate"
                                                title="First Label">
                                                Cedido por : &nbsp;<a if:true={perm.link} href=# onclick={getContactRecord}
                                                    name={perm.AV_GestorPermiso__c}>{perm.AV_Assigner__r.Name}</a>
                                                    <span if:false={perm.link}>{perm.AV_Assigner__r.Name}</span>
                                            </dt>
                                            <dt class="slds-item_label slds-text-color_weak slds-truncate"
                                                style="margin-top:.25rem" title="Second Label">
                                                Inicio: &nbsp;{perm.AV_InicioPermisoFormat__c} - Final:
                                                &nbsp;{perm.AV_FinalPermisoFormat__c}
                                            </dt>
                                        </dl>
                                    </div>
                                </div>
                            </article>
                        </div>
                    </div>

                </template>
            </div>
            <div if:true={emptyGiven}>
                <lightning-badge style="margin-top:1rem;font-size:1rem" label="No has recibido ningun permiso"
                    type="media"> </lightning-badge>
            </div>
        </div>
    </div>
    <div class="slds-docked-form-footer fixBtnPosition ">
        <div class="fixBtnPosition">
            <button type="button" class="slds-button slds-button_brand" disabled={maxPermisos}
                onclick={sendPermiso}>Ceder permisos</button>
        </div>
    </div>
    <lightning-spinner if:true={showSpinner} alternative-text="Loading" size="medium" class="spin-cls"
        style="z-index: 3;"></lightning-spinner>
</template>