<template>
    <lightning-card title="Reclamaciones vinculadas" icon-name="standard:case">
      <div slot="actions">
        <div class="slds-float_right">              
            <lightning-button-icon
                icon-name="utility:refresh"
                title="Refrescar"
                onclick={handleRecargar}>
            </lightning-button-icon>
        </div>
      </div>
      <lightning-tabset>
        <template if:true={mostrarRecSAC}>
            <lightning-tab label="SAC">
              <!-- <div class="slds-grid slds-wrap"> -->
                <template for:each={listadoReclamacionesSAC} for:item="reclamacion">
                  <!-- <div key={reclamacion.reclamacionActual.Id} style="padding:8px"> -->
                    <!-- INFORMACION RECLAMACIONES SAC -->
                    <lightning-card title={reclamacion.reclamacionActual.CaseNumber} key={reclamacion.reclamacionActual.Id} icon-name="standard:case"  style="width: 100%">
                      <div class="slds-m-left_small slds-text-heading_small">
                        <p>Asunto:
                          <lightning-button style="padding-left:8px" variant="base" id={reclamacion.reclamacionActual.Id} label={reclamacion.reclamacionActual.Subject}
                            onclick={navigateToCase} ></lightning-button>
                        </p>
                      </div>
                      <div class="slds-m-left_small  slds-grid slds-wrap slds-text-heading_small">
                        <div class="slds-size_6-of-12">
                          <p>
                            Fecha alta:
                            <lightning-formatted-date-time style="padding-left:8px"
                              value={reclamacion.reclamacionActual.CreatedDate}></lightning-formatted-date-time>
                          </p>
                        </div>
                        <div class="slds-size_6-of-12">
                          Estado:
                          {reclamacion.reclamacionActual.Status}</br>
                          Sentido Resolución:
                          {reclamacion.reclamacionActual.SAC_SentidoResolucion__c}</br>
                          <template if:true={reclamacion.reclamacionActual.SAC_ArgumentarioPretensiones__c}>
                          Argumentario Pretensiones:

                          <!-- Mostrar el contenido completo cuando isExpanded sea verdadero -->
                          <p>
                              <span if:true={reclamacion.isExpanded}>
                                  {reclamacion.reclamacionActual.SAC_ArgumentarioPretensiones__c}
                              </span>

                              <!-- Botón Ver más/Ver menos -->
                              <a href="javascript:void(0);" onclick={toggleText} data-id={reclamacion.reclamacionActual.Id}>
                                {reclamacion.toggleText}
                              </a>
                          </p>
                          </template>
                      </div>
                      </div>
                      <!--INFORMACION RECLAMANTES-->
                      <div class="slds-card__header slds-grid slds-wrap" style="padding: 12 px">
                        <div class="slds-size_12-of-12">
                          <template if:true={reclamacion.reclamantePrincipalActual}>
                            <span style="padding: 5px">Reclamante Principal:</span>
                            <div style="padding: 4px" class="slds-size_12-of-12">
                                <lightning-badge label={reclamacion.reclamantePrincipalActual}></lightning-badge>
                            </div>
                            <br />  
                          </template>
                        </div>
                        <div class="slds-size_12-of-12">
                          <template if:true={reclamacion.listaReclamantesSecundariosActual}>
                            <span style="padding: 5px">Reclamantes Secundarios:</span>
                            <template for:each={reclamacion.listaReclamantesSecundariosActual} for:item="reclamante">
                              <div style="padding: 4px" key={reclamante} class="slds-size_12-of-12">
                                  <lightning-badge label={reclamante}></lightning-badge>
                              </div>
                            </template>
                          </template>
                          <br />
                        </div>
                        <!--INFORMACION PRETENSIONES-->
                        <template for:each={reclamacion.listaPretensionesActual} for:item="pretension">
                          <div key={pretension.Id} class="slds-size_6-of-12">
                            <lightning-card title={pretension.CaseNumber} icon-name="standard:guidance_center">
                              <div>
                                <ul>
                                  <li class="slds-p-horizontal_small slds-size_1-of-1 slds-medium-size_1-of-1">
                                    <article class="slds-tile slds-media slds-card__tile slds-hint-parent">

                                      <div class="slds-media__body">
                                        <div class="slds-grid">
                                          <h3 class="slds-tile__title">
                                            <lightning-button variant="base" id={pretension.Id} label={pretension.Subject} onclick={navigateToCase}></lightning-button>
                                          </h3>
                                          <div class="slds-shrink-none">
                                          </div>
                                        </div>
                                        <div class="slds-tile__detail">
                                          <dl class="slds-list_horizontal slds-wrap">
                                            <dt class="slds-item_label slds-text-color_weak" title="Estado">Estado:
                                            </dt>
                                            <dd class="slds-item_detail" title={pretension.Status}>
                                              <template if:true={pretension.Status}>
                                                &nbsp; {pretension.Status}
                                              </template>
                                            </dd>
                                            <dt class="slds-item_label slds-text-color_weak" title="Grupo de trabajo">
                                              Grupo trabajo:</dt>
                                            <template if:true={pretension.SEG_Grupo__c}>
                                              <dd class="slds-item_detail" title={pretension.SEG_Grupo__r.Name}>
                                                &nbsp;  {pretension.SEG_Grupo__r.Name}
                                              </dd>
                                            </template> 
                                            <template if:false={pretension.SEG_Grupo__c}>
                                              <dd class="slds-item_detail" >
                                                &nbsp;  
                                              </dd>
                                            </template> 
                                            <dt class="slds-item_label slds-text-color_weak" title="Propietario">
                                              Propietario:  
                                            </dt>
                                            <template if:true={pretension.Owner.Name}>
                                              <dd class="slds-item_detail" title={pretension.Owner.Name}>
                                                &nbsp; {pretension.Owner.Name}
                                              </dd>
                                            </template>
                                            <template if:false={pretension.Owner.Name}>
                                              <dd class="slds-item_detail">
                                                &nbsp; 
                                              </dd>
                                            </template>
                                            <!-- Representar los numeros de contrato de cada pretension -->
                                            <dt class="slds-item_label slds-text-color_weak" title="Nº Contratos">
                                              NºContratos:
                                            </dt>
                                            <div>
                                              <br/>
                                              <template if:true={pretension.contratosPret}>
                                                <template for:each={pretension.contratosPret} for:item="contrato">
                                                  <div key={contrato} >
                                                    <span class="slds-item_label slds-text-color_weak" title={contrato}>
                                                      {contrato}
                                                    </span>
                                                  </div>
                                                </template>
                                              </template>
                                              <template if:false={pretension.contratosPret}>
                                                <dd class="slds-item_detail">
                                                  &nbsp; 
                                                </dd>
                                              </template>
                                            </div>
                                          </dl>
                                        </div>
                                      </div>
                                    </article>
                                  </li>
                                </ul>
                                <br/>
                              </div>
                            </lightning-card>
                          </div>
                        </template>
                      </div>
                    </lightning-card>
                  <!-- </div> -->
                </template>
                <template if:true={mostrarMsjVariasRecsSAC}>
                  <span style="margin-left: 5px;"><b>{msjVariasRec}</b></span>
                  <lightning-button variant="base" label="Mostrar todo" onclick={mostrarTodasRecsSAC} ></lightning-button>
                </template>
            <!-- </div> -->
            </lightning-tab>
        </template>
        <template if:true={mostrarRecSPV}>
            <lightning-tab label="Supervisores">
              <!-- <div class="slds-grid slds-wrap"> -->
                <template for:each={listadoReclamacionesSPV} for:item="reclamacion">
                  <!-- <div key={reclamacion.reclamacionActual.Id} style="padding:8px"> -->
                    <!-- INFORMACION RECLAMACIONES SPV -->
                    <lightning-card title={reclamacion.reclamacionActual.CaseNumber} key={reclamacion.reclamacionActual.Id} icon-name="standard:case"  style="width: 100%">
                      <div class="slds-m-left_small slds-text-heading_small">
                        <p>Número Expediente:
                          <lightning-button style="padding-left:8px" variant="base" id={reclamacion.reclamacionActual.Id} label={reclamacion.reclamacionActual.SPV_NumExpediente__c}
                            onclick={navigateToCase} ></lightning-button>
                        </p>
                      </div>
                      <div class="slds-m-left_small  slds-grid slds-wrap slds-text-heading_small">
                        <div class="slds-size_6-of-12">
                          <p>
                            Fecha alta:
                            <lightning-formatted-date-time style="padding-left:8px"
                              value={reclamacion.reclamacionActual.CreatedDate}></lightning-formatted-date-time>
                          </p>
                        </div>
                        <div class="slds-size_6-of-12">
                          Estado:
                          {reclamacion.reclamacionActual.Status}</br>
                          Sentido Resolución:
                          {reclamacion.reclamacionActual.SAC_SentidoResolucion__c}</br>
                          <template if:true={reclamacion.reclamacionActual.SAC_ArgumentarioPretensiones__c}>
                          Argumentario Pretensiones:

                          <!-- Mostrar el contenido completo cuando isExpanded sea verdadero -->
                          <p>
                              <span if:true={reclamacion.isExpanded}>
                                  {reclamacion.reclamacionActual.SAC_ArgumentarioPretensiones__c}
                              </span>

                              <!-- Botón Ver más/Ver menos -->
                              <a href="javascript:void(0);" onclick={toggleText} data-id={reclamacion.reclamacionActual.Id}>
                                {reclamacion.toggleText}
                              </a>
                          </p>
                          </template>
                      </div>
                      </div>
                      <!--INFORMACION RECLAMANTES-->
                      <div class="slds-card__header slds-grid slds-wrap" style="padding: 12 px">
                        <div class="slds-size_12-of-12">
                          <template if:true={reclamacion.reclamantePrincipalActual}>
                            <span style="padding: 5px">Reclamante Principal:</span>
                            <div style="padding: 4px" class="slds-size_12-of-12">
                                <lightning-badge label={reclamacion.reclamantePrincipalActual}></lightning-badge>
                            </div>
                            <br />  
                          </template>
                        </div>
                        <div class="slds-size_12-of-12">
                          <template if:true={reclamacion.listaReclamantesSecundariosActual}>
                            <span style="padding: 5px">Reclamantes Secundarios:</span>
                            <template for:each={reclamacion.listaReclamantesSecundariosActual} for:item="reclamante">
                              <div style="padding: 4px" key={reclamante} class="slds-size_12-of-12">
                                  <lightning-badge label={reclamante}></lightning-badge>
                              </div>
                            </template>
                          </template>
                          <br />
                        </div>
                        <!--INFORMACION PRETENSIONES-->
                        <template for:each={reclamacion.listaPretensionesActual} for:item="pretension">
                          <div key={pretension.Id} class="slds-size_6-of-12">
                            <lightning-card title={pretension.CaseNumber} icon-name="standard:guidance_center">
                              <div>
                                <ul>
                                  <li class="slds-p-horizontal_small slds-size_1-of-1 slds-medium-size_1-of-1">
                                    <article class="slds-tile slds-media slds-card__tile slds-hint-parent">

                                      <div class="slds-media__body">
                                        <div class="slds-grid">
                                          <h3 class="slds-tile__title">
                                            <lightning-button variant="base" id={pretension.Id} label={pretension.Subject} onclick={navigateToCase}></lightning-button>
                                          </h3>
                                          <div class="slds-shrink-none">
                                          </div>
                                        </div>
                                        <div class="slds-tile__detail">
                                          <dl class="slds-list_horizontal slds-wrap">
                                            <dt class="slds-item_label slds-text-color_weak" title="Estado">Estado:
                                            </dt>
                                            <dd class="slds-item_detail" title={pretension.Status}>
                                              <template if:true={pretension.Status}>
                                                &nbsp; {pretension.Status}
                                              </template>
                                            </dd>
                                            <dt class="slds-item_label slds-text-color_weak" title="Grupo de trabajo">
                                              Grupo trabajo:</dt>
                                            <template if:true={pretension.SEG_Grupo__c}>
                                              <dd class="slds-item_detail" title={pretension.SEG_Grupo__r.Name}>
                                                &nbsp;  {pretension.SEG_Grupo__r.Name}
                                              </dd>
                                            </template> 
                                            <template if:false={pretension.SEG_Grupo__c}>
                                              <dd class="slds-item_detail" >
                                                &nbsp;  
                                              </dd>
                                            </template> 
                                            <dt class="slds-item_label slds-text-color_weak" title="Propietario">
                                              Propietario:  
                                            </dt>
                                            <template if:true={pretension.Owner.Name}>
                                              <dd class="slds-item_detail" title={pretension.Owner.Name}>
                                                &nbsp; {pretension.Owner.Name}
                                              </dd>
                                            </template>
                                            <template if:false={pretension.Owner.Name}>
                                              <dd class="slds-item_detail">
                                                &nbsp; 
                                              </dd>
                                            </template>
                                            <!-- Representar los numeros de contrato de cada pretension -->
                                            <dt class="slds-item_label slds-text-color_weak" title="Nº Contratos">
                                              NºContratos:
                                            </dt>
                                            <div>
                                              <br/>
                                              <template if:true={pretension.contratosPret}>
                                                <template for:each={pretension.contratosPret} for:item="contrato">
                                                  <div key={contrato} >
                                                    <span class="slds-item_label slds-text-color_weak" title={contrato}>
                                                      {contrato}
                                                    </span>
                                                  </div>
                                                </template>
                                              </template>
                                              <template if:false={pretension.contratosPret}>
                                                <dd class="slds-item_detail">
                                                  &nbsp; 
                                                </dd>
                                              </template>
                                            </div>
                                          </dl>
                                        </div>
                                      </div>
                                    </article>
                                  </li>
                                </ul>
                                <br/>
                              </div>
                            </lightning-card>
                          </div>
                        </template>
                      </div>
                    </lightning-card>
                  <!-- </div> -->
                </template>
                <template if:true={mostrarMsjVariasRecsSPV}>
                  <span style="margin-left: 5px;"><b>{msjVariasRec}</b></span>
                  <lightning-button variant="base" label="Mostrar todo" onclick={mostrarTodasRecsSPV} ></lightning-button>
                </template>
              <!-- </div> -->
            </lightning-tab>
        </template>
      </lightning-tabset>
    </lightning-card>
</template>