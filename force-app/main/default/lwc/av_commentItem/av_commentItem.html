<template>
	<div class={divClass} >
		<div class="slds-media">
			<div class="slds-media__figure">
				<div class="slds-timeline__icon tm-div">
					<lightning-icon icon-name={iconName} class="slds-timeline__icon" size="small"></lightning-icon>
				</div>
			</div>
			<div class="slds-media__body cont-evt-tsk" >
				<lightning-layout>
					<lightning-layout-item  class="layout-item-pad-top-subject" size="10" small-device-size="7" medium-device-size="7" large-device-size="7" padding="around-small">
							<div class="div-inline" >
								<h1 class="desbordarText">
									<a class="va-top" onclick={viewRecord} title={item.subject}>{item.subject}</a>
								</h1>
								<div class="comentario-margin-top">
									<label>{item.comment}</label>
								</div>
							</div>
						</lightning-layout-item>
						
						<lightning-layout-item alignment-bump="left" class="layout-item-pad-top_1" size="1" small-device-size="1" medium-device-size="1" large-device-size="1" padding="around-small">
							<p if:true={isDate}>{item.dateField}</p>
						</lightning-layout-item>
						<lightning-layout-item class="layout-item-pad-top_2"  size="1" small-device-size="1" medium-device-size="1" large-device-size="1"  padding="around-small">
							<p if:true={isType} class="desbordarText"  title={item.contactType}>{item.contactType}</p>
							<p if:true={isProduct} class="desbordarText" title={item.product}>{item.product}</p>
							<p if:true={isChannel} class="desbordarText" title={item.caseChannel}>{item.caseChannel}</p>
						</lightning-layout-item>
						<lightning-layout-item class="layout-item-pad-top slds-m-left_large slds-m-right_medium layout-item-pad-top_3"  size="1" small-device-size="1" medium-device-size="1" large-device-size="1" padding="around-small">
							<p if:true={isStatus} class="desbordarText" title={item.status}>{item.status}</p>
						</lightning-layout-item>
						<lightning-layout-item class="layout-item-pad-top slds-m-left_small layout-item-pad-top_4" size="1" small-device-size="1" medium-device-size="1" large-device-size="1" padding="around-small">
							<p if:true={isEmployee} class="desbordarText" title={item.employee}>{item.employee}</p>
						</lightning-layout-item>
				</lightning-layout>
			</div>
		</div>
		
		<template if:true={hasOpps}>
			<template for:each={item.nestedOpportunities} for:item="nestedOpportunity" for:index="index">
				<div class="slds-media" key={nestedOpportunity.id}>
					<div class="contendedor-general-oppo" >                   
						<div class="slds-media__body margin-sub-opp" >
							<lightning-layout>
								<lightning-layout-item  class="layout-item-pad-top-subject cont-opp" size="10" small-device-size="7" medium-device-size="7" large-device-size="7" padding="around-small">
									<div class="div-inline-2">
										<div class="slds-media__figure" > 
											<lightning-icon icon-name="standard:opportunity" class="slds-timeline__icon" size="small"></lightning-icon >   
										</div>
										<h1 class="desbordarText3">
											<a onclick={viewRecordOppo} data-record-id={nestedOpportunity.recordId} title={nestedOpportunity.subject}>{nestedOpportunity.subject} &nbsp;</a>         
										</h1>
										<span class="slds-badge" data-id={nestedOpportunity.recordId} >{nestedOpportunity.status}</span> 
									</div>
								</lightning-layout-item>
								<lightning-layout-item alignment-bump="left" class="layout-item-pad-top_1" size="1" small-device-size="1" medium-device-size="1" large-device-size="1" padding="around-small"></lightning-layout-item>
								<lightning-layout-item class="layout-item-pad-top_2"  size="1" small-device-size="1" medium-device-size="1" large-device-size="1"  padding="around-small"></lightning-layout-item>
								<lightning-layout-item class="layout-item-pad-top slds-m-left_large slds-m-right_medium layout-item-pad-top_3"  size="1" small-device-size="1" medium-device-size="1" large-device-size="1" padding="around-small">	
									<p class="desbordarText2" title={nestedOpportunity.product}>{nestedOpportunity.product}</p>
								</lightning-layout-item>
								<lightning-layout-item class="layout-item-pad-top slds-m-left_small layout-item-pad-top_4" size="1" small-device-size="1" medium-device-size="1" large-device-size="1" padding="around-small">
									<div class="desbordarText" title={nestedOpportunity.employee}>{nestedOpportunity.employee}</div>
								</lightning-layout-item> 
							</lightning-layout>
							<div class="comentario-class" >
								<template if:true={hasOpps}>
									<template for:each={nestedOpportunity.comentarios} for:item="comentario" for:index="idx">
										<div key={nestCom}>
											<div class="comentario-inside2">
												<p><span style="color:gray">{comentario.fechaComentario} - </span>{comentario.comentario}</p>
											</div>
										</div>
									</template>
								</template>
							</div>
						</div>   
					</div>
				</div>
			</template>
		</template>
	 </div>
</template>