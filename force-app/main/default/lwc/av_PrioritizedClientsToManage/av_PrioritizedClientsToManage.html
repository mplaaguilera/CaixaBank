<template>
    <!--Inincio cabecera-->
        <div class="slds-page-header slds-page-header_record-home">
            <div class="slds-page-header__row">
                <div class="slds-page-header__col-title">
                    <div class="slds-media">  
                        <div class="slds-media__figure" >
                            <lightning-icon data-id="falseIcon" icon-name="standard:report"></lightning-icon>
                        </div>
                        <div class="slds-media__body" style="margin-right:20%">
                            <div class="slds-page-header__name">
                                <div class="slds-page-header__name-title">
                                    <h1>
                                        <ul class="slds-list_horizontal">
                                            <li class="slds-m-right_x-small">
                                                <span>Informe: Mis clientes</span>
                                            </li>
                                        </ul>
                                        <span class= "slds-page-header__title slds-truncate">{nameReport}</span>
                                    </h1>
                                </div>
                            </div>    
                        </div> 
                        <div class = "miDiv">                         
                            <lightning-button  label="Consultar mÃ¡s oportunidades" onclick={navigateToMassReassignOwnerOpps}></lightning-button>
                        </div>     
                    </div>
                </div>
            </div>
        </div>
    <!--Fin Cabebecera-->

    <br>
    <article if:true={renderComponent} class="slds-card">
            <div data-id="lookup2" class="slds-grid customHeader" >
                <div class="slds-col slds-size-9-of-12" style="padding:.5rem 0"><strong>Filtrar clientes</strong></div>
                <div class="slds-size-3-of-12 buttonAlign">
                    <lightning-button class="buttonStyle" label="Reiniciar" onclick={resetFilters}></lightning-button>
                    <lightning-button class="buttonStyle" variant="brand" label="Buscar" onclick={handleSearchData}
                    disabled={buttonDisabled}></lightning-button>
                    <lightning-button-icon  icon-name="utility:refresh" alternative-text="Reload" slot="actions" onclick={handleSearchData}></lightning-button-icon>  
                </div>
            </div>  
            <input type="text" data-id="falseInput" style="opacity:0;position:absolute;width:1px">
        
            
            <div class="slds-border_top margin-right-search">
                <div data-id="lookup1" class="slds-form-element__label assign-lookup slds-size_1-of-4 lookUp1" style="margin-left:2rem;margin-right:0;padding-right:0">
                        <c-av_-lookup class="width-input" data-id="clookup2" selection={initialSelectionOffice} errors={errors} onsearch={handleSearcOffice} onselectionchange={handleSelectionChange} onclick={handleSearchOfficeClick} fieldlabel="Oficina" placeholder={officePlaceholder} is-multi-entry={isMultiEntry} required></c-av_-lookup>
                </div> 

                <div class="slds-col slds-size_1-of-4 margin-toggle slds-form-element__label">
                    <lightning-combobox class="width-input" name="owner" label="Empleado asignado" data-id = "employeesDropDown" options={optionsEmployee} value={employeeFilter} placeholder="--Seleccionar--" onchange={handleChangeEmployee} disabled={isDisabledEmployee} required></lightning-combobox>
                    <div class="slds-form_vertical slds-grid margin-toggle not-margined">
                        <lightning-input type="toggle" class="another-office" onchange={handleAnotherOffice} checked={isAnotherOffice} name="anotherOffice" variant="label-hidden" message-toggle-active="" message-toggle-inactive="" disabled={isDisabledEmployee}></lightning-input>
                        <label class="slds-form-element__label">Ver empleados de otras oficinas</label>
                    </div>
                    <lightning-spinner if:true={loadingEmployee} alternative-text="Loading" size="medium"></lightning-spinner>
                </div>
            </div>
            <div class=" margin-right-search">

                <div data-id="lookup1" class="slds-size_1-of-4" style="margin-left:2rem">            
                    
                <lightning-input  type="text" name="subject" placeholder= "Buscar asunto..." onchange={handleChangeSubject} disabled ={subjectDisabled}></lightning-input>
                </div>
                    
                <div  style="width:fit-content;margin-left:0">
                    <lightning-combobox data-id="" name="origen" style="width:10rem"
                        options={optionsOrigen} placeholder="Origen" onchange={handleChangeOrigen} value={origenFilter} disabled={originDisabled}>
                    </lightning-combobox>
                </div>
                
                
                   
                
                <div class="div-checkbox slds-grid">
                    <lightning-input name="recordTypes" label="Preconcedido" type="checkbox" onchange={handleChangePreconcedido} checked={preconcedidoFilter} disabled={disabledCb}></lightning-input>
                    <lightning-input name="status" label="MyBox" type="checkbox" onchange={handleChangeMyBox} checked={myBoxFilter} disabled={disabledCb}></lightning-input>
                    <lightning-input name="owner" label="Target Auto" type="checkbox" onchange={handleChangeTargetAuto} checked={targetAutoFilter} disabled={disabledCb}></lightning-input>
                </div>
            </div>  



    <div class="slds-border_top" style="padding-bottom:1rem">

        <div if:true={origenDiv} class="slds-grid margin-pill">
            <template for:each={originSelect} for:item="origen" >
                <div key={origen.bucleId} class="origen-select" data-id="origen.id">
                    <span class="slds-pill" style="margin:8px .6rem 0px 0" >
                        <span class="slds-pill__label customPill" >{origen.typeLabel}<a href="#">{origen.label}</a></span>
                        <lightning-button-icon icon-name="utility:close" style="margin:-3px 0 0 5px"
                            variant="bare" name={origen.value} onclick={unSelectOrigen}>    
                        </lightning-button-icon>
                    </span>                
                </div>                  
            </template>
        </div>

    <div if:true={employeesDiv} class="slds-form_vertical slds-grid divPaddingEmployee  margin-fix" >
        <ul class="slds-clearfix">
            <template for:each={selectedEmployees} for:item="employee">
                <li key={employee.bucleId} class="slds-float_left" data-id={employee.id} >
                    <lightning-pill style="margin:8px 0" class="margin-pill-employee" label={employee.label} name ={employee.id} onremove={unSelectEmployee}>
                        <lightning-icon icon-name="standard:user" alternative-text="user"></lightning-icon>
                    </lightning-pill>
                </li>
            </template>
        </ul>
    </div>
    </div>
            
</article>
<br>
    <lightning-spinner if:true={showSpinner} alternative-text="Cargando..." variant="brand" size="medium"
    class="spin-cls"></lightning-spinner>

    <template if:true={showTable}>
        <lightning-datatable data={dataClient}
            columns={columns} 
            key-field="Id"
            default-sort-direction={defaultSortDirection}
            sorted-by={sortedBy}
            sorted-direction={sortDirection}
            onsort={handleSortData}
            hide-checkbox-column
            >
        </lightning-datatable>
    </template>

    
</template>