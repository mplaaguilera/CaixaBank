<template>
    <template if:true={hayControlesAlta}>
        <div class={toggleSeccionControlAltas}>
            <h1 class="slds-section__title">
                <button aria-controls="expando-unique-id-control-altas" aria-expanded="true" class="slds-button slds-section__title-action titulo-despegable" onclick={handleExpandirControlAltas}>
                <svg class="slds-section__title-action-icon slds-button__icon slds-button__icon_left" aria-hidden="true">
                    <use xlink:href="/_slds/icons/utility-sprite/svg/symbols.svg#switch"></use>
                </svg>
                <span class="slds-truncate" title="control Altas">Tareas protocolarias</span>
                </button>
            </h1>
            <div class="slds-section__content cuerpo-seccion" id="expando-unique-id-contenidoControlAltas">             
                <div class="slds-grid slds-wrap">
                    <template if:true={mapaSecciones}>
                        <template for:each={mapaSecciones} for:item="mapaKey">
                            <div key={mapaKey.key} class="slds-col slds-size_1-of-2 elemento-form">
                                <details open>
                                    <summary class="slds-button slds-section__title-action">                            
                                        <h3 class="slds-section__title">                                
                                            {mapaKey.key}                                
                                        </h3>
                                    </summary>
                                    <template if:true={mapaKey.value}>
                                        <template for:each={mapaKey.value} for:item="object">  
                                            <div key={object.idControl} class="slds-form-element slds-form-element_readonly slds-form-element__control">
                                                <div class="slds-col slds-size_3-of-5 elemento-form">
                                                    <span class="slds-text-title labelControl">{object.nameControl}</span>
                                                </div>
                                                <div class="slds-col slds-size_1-of-5 elemento-form slds-float_left">
                                                    <lightning-helptext class="textoInfo" content={object.descControl}></lightning-helptext>
                                                    <!-- <lightning-helptext class="textoInfo" content={object.nombreChecklist}></lightning-helptext> -->
                                                </div>
                                                <div class="slds-col slds-size_1-of-5 elemento-form">
                                                    <lightning-input 
                                                        type="checkbox" 
                                                        class="selector"
                                                        checked={object.selecionadoControl}
                                                        value={object.idControl}
                                                        disabled={object.desactivarControl}
                                                        onchange={handleChange}>
                                                    </lightning-input>
                                                </div>
                                            </div> 
                                        </template>
                                    </template>
                                </details><br/>
                            </div>
                        </template>
                    </template>
                </div>
            </div>
            <template if:true={mostrarBotones}>
                <div class="botonera-container">
                    <lightning-button            
                        label="Cancelar" 
                        title="Cancelar" 
                        class="btnCancelar"
                        onclick={handleClickCancelar} 
                    ></lightning-button>       
                    <lightning-button variant="brand"                 
                        label="Guardar" 
                        title="Guardar" 
                        onclick={handleClickGuardar} 
                    ></lightning-button>  
                </div>              
            </template>      
        </div> 
        <template if:true={spinnerLoading}>
            <section role="dialog" tabindex="-1" aria-modal="true" class="slds-modal slds-fade-in-open">
                <lightning-spinner alternative-text="Loading" size="large" variant="brand"></lightning-spinner>
            </section>
        </template> 
    </template>
</template>