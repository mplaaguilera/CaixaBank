<template>
    <template if:true={hayControlesAlta}>
        <div class={toggleSeccionControlAltas}>
            <h1 class="slds-section__title">
                <button aria-controls="expando-unique-id-control-altas" aria-expanded="true" class="slds-button slds-section__title-action titulo-despegable" onclick={handleExpandirControlAltas}>
                <svg class="slds-section__title-action-icon slds-button__icon slds-button__icon_left" aria-hidden="true">
                    <use xlink:href="/_slds/icons/utility-sprite/svg/symbols.svg#switch"></use>
                </svg>
                <span class="slds-truncate" title="control Altas">Tareas protocolarias</span>
                </button>
            </h1>
            <div class="slds-section__content cuerpo-seccion" id="expando-unique-id-contenidoControlAltas">             
                <div class="slds-grid slds-wrap">
                    <template if:true={mapaSecciones}>
                        <template for:each={mapaSecciones} for:item="mapaKey">
                            <div key={mapaKey.key} class="slds-col slds-size_1-of-1 elemento-form">
                                <details open>
                                    <summary class="slds-button slds-section__title-action" style="padding-inline: 0.5rem;">  
                                        <div class="slds-col slds-size_4-of-12 elemento-form">
                                            <h3 class="slds-section__title">                                
                                                {mapaKey.key}                                
                                            </h3>
                                        </div>  
                                        <div class="slds-col slds-size_1-of-12 elemento-form">
                                            <h3 class="slds-section__title">                                
                                                <!-- <p>#####</p>                              -->
                                            </h3>
                                        </div>
                                        <div class="slds-col slds-size_1-of-12 elemento-form">
                                            <h3 class="slds-section__title slds-text-align_center" style="padding-inline: 0.0rem;">                             
                                                <p>Hecho</p>                             
                                            </h3>
                                        </div>
                                        <div class="slds-col slds-size_1-of-12 elemento-form">
                                            <h3 class="slds-section__title slds-text-align_center" style="padding-inline: 0.4rem;">                               
                                                <p>N/A</p>                             
                                            </h3>
                                        </div>  
                                        <div class="slds-col slds-size_4-of-12 elemento-form">
                                            <h3 class="slds-section__title">                                
                                                <p>Raz√≥n de que no aplique (N/A)</p>                             
                                            </h3>
                                        </div>                 
                                    </summary>
                                    <template if:true={mapaKey.value}>
                                        <template for:each={mapaKey.value} for:item="object">  
                                            <!-- <div key={object.idControl} class="slds-form-element slds-form-element_readonly slds-form-element__control" style="padding: 0.2rem;"> -->
                                            <div key={object.idControl} class="slds-form-element slds-form-element_readonly slds-form-element__control" style="padding-inline: 0.5rem;">
                                                <div class="slds-col slds-size_4-of-12 elemento-form">
                                                    <span class="slds-text-title labelControl">{object.nameControl}</span>
                                                </div>
                                                <div class="slds-col slds-size_1-of-12 elemento-form" style="padding-inline: 0.0rem;">
                                                    <lightning-helptext class="textoInfo" content={object.descControl}></lightning-helptext>
                                                    <!-- <lightning-helptext class="textoInfo" content={object.nombreChecklist}></lightning-helptext> -->
                                                </div>
                                                <div class="slds-col slds-size_1-of-12 elemento-form" style="padding-inline: 0.6rem;">
                                                    <lightning-input 
                                                        type="checkbox" 
                                                        label=""
                                                        class="selector"
                                                        checked={object.selecionadoControl}
                                                        value={object.idControl}
                                                        disabled={object.desactivarControl}
                                                        onchange={handleChangeCompletada}>
                                                    </lightning-input>
                                                </div>
                                                <div class="slds-col slds-size_1-of-12 elemento-form" style="padding-inline: 0.5rem;">
                                                    <lightning-input 
                                                        type="checkbox" 
                                                        label=""
                                                        class="selector"
                                                        checked={object.noAplicaControl}
                                                        value={object.idControl}
                                                        disabled={object.desactivarControl}
                                                        onchange={handleChangeNoAplica}>
                                                    </lightning-input>
                                                </div>
                                                <div class="slds-col slds-size_4-of-12 elemento-form" style="padding-inline: 0.0rem;">
                                                    <lightning-input 
                                                        type="text" 
                                                        data-id={object.idControl}
                                                        value={object.razonNoAplica}
                                                        onchange={handleChangeRazonNoAplica}
                                                        disabled={object.disabledRazonNoAplica}
                                                        style="height: 4.5rem;">
                                                    </lightning-input>
                                                    <!-- <h3 class="slds-section__title">                                
                                                        <p>#####_#####_#####_#####_#####_#####_</p>                             
                                                    </h3> -->
                                                </div> 
                                            </div>
                                        </template>
                                    </template>
                                </details><br/>
                            </div>
                        </template>
                    </template>
                </div>
            </div>
            <template if:true={mostrarBotones}>
                <div class="botonera-container">
                    <lightning-button            
                        label="Cancelar" 
                        title="Cancelar" 
                        class="btnCancelar"
                        onclick={handleClickCancelar} 
                    ></lightning-button>       
                    <lightning-button variant="brand"                 
                        label="Guardar" 
                        title="Guardar" 
                        onclick={handleClickGuardar} 
                    ></lightning-button>  
                </div>              
            </template>      
        </div> 
        <template if:true={spinnerLoading}>
            <section role="dialog" tabindex="-1" aria-modal="true" class="slds-modal slds-fade-in-open">
                <lightning-spinner alternative-text="Loading" size="large" variant="brand"></lightning-spinner>
            </section>
        </template> 
    </template>
</template>