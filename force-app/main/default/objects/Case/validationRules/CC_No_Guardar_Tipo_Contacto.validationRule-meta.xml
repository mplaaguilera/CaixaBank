<?xml version="1.0" encoding="UTF-8"?>
<ValidationRule xmlns="http://soap.sforce.com/2006/04/metadata">
    <fullName>CC_No_Guardar_Tipo_Contacto</fullName>
    <active>true</active>
    <description>Regla de validaci√≥n para que no permita guardar y asociar una cuenta y contacto de tipo cliente si es un caso de empleados y viceversa.</description>
    <errorConditionFormula>AND(
				OR(
								AND(
		        CC_Admin__c != TRUE,
										$User.LastName &lt;&gt; &apos;Bluewolf&apos;,
		        $User.LastName &lt;&gt; &apos;System&apos;),
				      $Permission.CC_ByPassVR != TRUE),
  OR(
    AND(
      RecordType.DeveloperName == &apos;CC_Empleado&apos;,
      OR(
        Account.RecordType.DeveloperName == &apos;CC_Cliente&apos;,
        Contact.RecordType.DeveloperName == &apos;CC_Cliente&apos;,
        Account.RecordType.DeveloperName == &apos;CC_ClientePA&apos;,
								AND(Contact.RecordType.DeveloperName &lt;&gt; &apos;CC_Empleado&apos;, 
												NOT(ISNULL(ContactId)),
												NOT(ISBLANK(ContactId)))
      ) 
    )  
    , 
    AND(
      RecordType.DeveloperName == &apos;CC_Cliente&apos;,
      OR(
        Account.RecordType.DeveloperName == &apos;CC_CentroCaixaBank&apos;,
        Account.RecordType.DeveloperName == &apos;CC_Generico&apos;,
        Contact.RecordType.DeveloperName == &apos;CC_Empleado&apos;
      
      )
    )
  )
)</errorConditionFormula>
    <errorMessage>No se puede guardar y asociar una cuenta y contacto de tipo cliente si es un caso de empleados y viceversa.</errorMessage>
</ValidationRule>
